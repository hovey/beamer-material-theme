SOURCE_FILES = Rake::FileList.new("src/**/*") do |file|
  file.exclude("~*")
  file.exclude do |f|
    `git ls-files #{f}`.empty?
  end
end

OUTPUT_FILES = SOURCE_FILES.pathmap("build/%p")

task :default => :copy_files

desc "Copy files to the output directory"
task :copy_files do
  SOURCE_FILES.each do |f|
    puts "File: #{f}"
  end
end

task :compile do
  sh "latexmk src/main.tex"
end
