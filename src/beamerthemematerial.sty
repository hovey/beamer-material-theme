\mode<presentation>

% ~~~~~~~~~
% ~ Theme ~
% ~~~~~~~~~
\usepackage{src/material_colors}

\usepackage{src/beamerinnerthemematerial}
\usepackage{src/beamerouterthemematerial}
\usepackage{src/beamercolorthemematerial}


% ~~~~~~~~~~~~~~~~
% ~ Requirements ~
% ~~~~~~~~~~~~~~~~
\RequirePackage{tikz}
\RequirePackage{xcolor, etoolbox, xstring}
\RequirePackage[many]{tcolorbox}
\RequirePackage{hyperref}
\RequirePackage[absolute, overlay]{textpos} % For source/credits of pictures


% Customize list appearance
\newcommand{\myitem}{\item[\textcolor{primary-color-text}\textbullet]}

% Add command to add source for pictures (credits)
\newcommand{\source}[1]{\begin{textblock*}{4cm}(1cm,8.6cm)
	\begin{beamercolorbox}[ht=0.5cm,left]{imagesource}
			\usebeamerfont{imagesource}\usebeamercolor[fg]{imagesource} Source: {#1}
	\end{beamercolorbox}
\end{textblock*}}


% Create a side by side slide with arguments:
% #1: optional argument specifying the ratio
% #2: left side content
% #3: right side content
% #4: left side tcolorbox options
% #5: right side tcolorbox options
\newcommand{\sidebysideleft}[5][0.49]{
  \begin{minipage}[t]{#1\textwidth}
		\begin{tcolorbox}[
			enhanced,
			colback=primary-color,
			coltext=primary-color-text,
			sharp corners,
			boxrule=0mm,
			toprule=-0.4mm,
			bottomrule=-1.1mm,
			leftrule=-10mm,
			left=6mm, right=6mm, top=2.6mm, bottom=2mm, % text padding
			fuzzy shadow={0mm}{-0.4mm}{-1mm}{0.2mm}{fill=shadow!40!bgcolor-03},
			width=\textwidth,
			height=\textheight, #4]
			#2
		  \end{tcolorbox}
	\end{minipage}
	\noindent
	\begin{minipage}[t]{\dimexpr0.99\textwidth - #1\textwidth}
		\begin{tcolorbox}[
			empty,
			coltext=secondary-color-text,
			sharp corners,
			boxrule=0mm,
			toprule=-0.4mm,
			bottomrule=-1.1mm,
			rightrule=-15mm,
			left=6mm, right=6mm, top=2.6mm, bottom=2mm, % text padding
			width=\textwidth,
			height=\textheight, #5]
			#3
		  \end{tcolorbox}
	\end{minipage}
}
\newcommand{\sidebysideright}[5][0.49]{
  \begin{minipage}[t]{\dimexpr0.99\textwidth - #1\textwidth}
		\begin{tcolorbox}[
			empty,
			coltext=secondary-color-text,
			sharp corners,
			boxrule=0mm,
			toprule=-0.4mm,
			bottomrule=-1.1mm,
			leftrule=-10mm,
			left=6mm, right=6mm, top=2.6mm, bottom=2mm, % text padding
			width=\textwidth,
			height=\textheight, #4]
			#2
		  \end{tcolorbox}
	\end{minipage}
	\noindent
	\begin{minipage}[t]{#1\textwidth}
		\begin{tcolorbox}[
			enhanced,
			colback=primary-color,
			coltext=primary-color-text,
			sharp corners,
			boxrule=0mm,
			toprule=-0.4mm,
			bottomrule=-1.1mm,
			rightrule=-15mm,
			left=6mm, right=6mm, top=2.6mm, bottom=2mm, % text padding
			fuzzy shadow={0mm}{-0.4mm}{-1mm}{0.2mm}{fill=shadow!40!bgcolor-03},
			width=\textwidth,
			height=\textheight, #5]
			#3
		  \end{tcolorbox}
	\end{minipage}
}


% Create a new topic-introduction frame with primary background color and the topic name as title (given as argument)
\newcommand{\topicFramePrimary}[2][\unskip]{
	{
		\colorlet{bgcolor-03}{primary-color}
		\colorlet{secondary-color-text}{primary-color-text}
		\usebeamercolor*{normal text}
		\begin{frame}
			\begin{center}
				{\LARGE#2}
				\ifx\hfuzz#1\hfuzz
				% EMPTY
				\else
				\\
				\vspace{1em}
				#1%
				\fi
			\end{center}
		\end{frame}
	}
}
\newcommand{\topicFrameSecondary}[2][\unskip]{
	{
		\colorlet{bgcolor-03}{secondary-color}
		\usebeamercolor*{normal text}
		\begin{frame}
			\begin{center}
				{\LARGE#2}
				\ifx\hfuzz#1\hfuzz
				% EMPTY
				\else
				\\
				\vspace{1em}
				#1%
				\fi
			\end{center}
		\end{frame}
	}
}


% ~~~~~~~~~~~~~~~~~~~~
% ~ Default Settings ~
% ~~~~~~~~~~~~~~~~~~~~

\directlua{
	local config = require("src/config")
	local Utils = require("src/Utils")

	Utils.defineHTMLColor("primary-color", config.PrimaryColor)
	Utils.defineHTMLColor("primary-color-light", config.PrimaryColorLight)
	Utils.defineHTMLColor("primary-color-dark", config.PrimaryColorDark)
	Utils.defineHTMLColor("primary-color-text", config.PrimaryTextColor)
	Utils.defineHTMLColor("secondary-color", config.SecondaryColor)
	Utils.defineHTMLColor("secondary-color-light", config.SecondaryColorLight)
	Utils.defineHTMLColor("secondary-color-dark", config.SecondaryColorDark)
	Utils.defineHTMLColor("secondary-color-text", config.SecondaryTextColor)
	Utils.defineHTMLColor("accent-color", config.AccentColor)
	Utils.defineHTMLColor("shadow", config.Shadow)
	Utils.defineHTMLColor("bgcolor-01", config.BackgroundColor1)
	Utils.defineHTMLColor("bgcolor-02", config.BackgroundColor2)
	Utils.defineHTMLColor("bgcolor-03", config.BackgroundColor3)
	Utils.defineHTMLColor("bgcolor-04", config.BackgroundColor4)
}


\setbeamercolor*{alerted text}{fg=accent-color,bg=}

\mode<all>